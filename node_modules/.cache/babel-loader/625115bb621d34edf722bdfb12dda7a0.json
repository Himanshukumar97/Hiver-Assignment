{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport _ from 'lodash';\nconst initialState = {\n  getDataState: 'INIT',\n  data: [],\n  error: '',\n  lastNullQuery: ''\n};\n\nconst initState = () => {\n  return initialState;\n}; //GET DATA REDUCERS\n\n\nconst getDataLoading = state => {\n  return { ...state,\n    getDataState: 'LOADING'\n  };\n};\n\nconst getDataSuccess = (state, action) => {\n  let allData = _.cloneDeep(state.data);\n\n  let filteredData;\n  let allDataObjId = [];\n\n  _.forEach(allData, eachData => {\n    allDataObjId.push(eachData.objectID);\n  });\n\n  filteredData = action.data.hits.filter(obj => !_.includes(allDataObjId, obj.objectID) ? true : false);\n  allData = _.concat(allData, filteredData);\n  console.log(\"before sort \", allData);\n  allData = allData.sort(function (a, b) {\n    let relA, relB;\n    if (!(\"relevancy_score\" in a) && !_.isEmpty(a['relevancy_score'])) relA = Number.MAX_VALUE;else relA = a.relevancy_score;\n    if (!(\"relevancy_score\" in b) && !_.isEmpty(b['relevancy_score'])) relB = Number.MAX_VALUE;else relB = b.relevancy_score;\n    console.log(\"relA \", relA, \" relB \", relB);\n    if (relA > relB) return 1;\n    if (relA < relB) return -1;\n    return 0;\n  });\n  console.log(\"after sort \", allData);\n  return { ...state,\n    getDataState: 'SUCCESS',\n    data: allData,\n    lastNullQuery: action.lastNullQuery,\n    error: null\n  };\n};\n\nconst getDataError = (state, action) => {\n  return { ...state,\n    getDataState: 'ERROR',\n    error: action.error\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.INIT_STATE:\n      return initState();\n\n    case actionTypes.GET_DATA_LOADING:\n      return getDataLoading(state, action);\n\n    case actionTypes.GET_DATA_SUCCESS:\n      return getDataSuccess(state, action);\n\n    case actionTypes.GET_DATA_ERROR:\n      return getDataError(state, action);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/himanshukumar/Documents/hiver-assignment/src/pages/Home/Store/reducer.js"],"names":["actionTypes","_","initialState","getDataState","data","error","lastNullQuery","initState","getDataLoading","state","getDataSuccess","action","allData","cloneDeep","filteredData","allDataObjId","forEach","eachData","push","objectID","hits","filter","obj","includes","concat","console","log","sort","a","b","relA","relB","isEmpty","Number","MAX_VALUE","relevancy_score","getDataError","reducer","type","INIT_STATE","GET_DATA_LOADING","GET_DATA_SUCCESS","GET_DATA_ERROR"],"mappings":"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","sourcesContent":["import * as actionTypes from './actionTypes';\nimport _ from 'lodash';\nconst initialState = {\n    getDataState: 'INIT',\n    data:[],\n    error:'',\n    lastNullQuery:''\n}\n\nconst initState = () => {\n    return initialState;\n}\n\n//GET DATA REDUCERS\nconst getDataLoading = (state) => {\n    return {...state, \n        getDataState: 'LOADING'\n    } ;\n}\n\nconst getDataSuccess = (state, action) => {\n    let allData = _.cloneDeep(state.data);\n    let filteredData ; \n    let allDataObjId = [] ;\n    _.forEach(allData, eachData =>{\n        allDataObjId.push(eachData.objectID);\n    });\n    filteredData = action.data.hits.filter(obj =>\n        !_.includes(allDataObjId, obj.objectID) ?\n          true : false\n      )\n\n    \n    allData = _.concat(allData,filteredData) ; \n    console.log(\"before sort \",allData);\n    \n    allData = allData.sort(function(a, b) {\n        let relA ,relB;\n        if(!(\"relevancy_score\" in a) && !_.isEmpty(a['relevancy_score']))\n            relA = Number.MAX_VALUE ;\n        else    \n            relA = a.relevancy_score\n        if(!(\"relevancy_score\" in b) && !_.isEmpty(b['relevancy_score']))\n            relB = Number.MAX_VALUE ;\n        else    \n            relB = b.relevancy_score;\n        \n        console.log(\"relA \" , relA , \" relB \",relB );\n        \n        if (relA > relB) return 1;\n        if (relA < relB) return -1;\n        return 0;\n      });\n\n      console.log(\"after sort \",allData);\n    return {...state,\n        getDataState: 'SUCCESS',\n        data: allData,\n        lastNullQuery:action.lastNullQuery,\n        error: null\n    }\n};\n\nconst getDataError = (state, action) => {\n    return {...state,\n        getDataState: 'ERROR',\n        error: action.error,\n    };\n};\n\n\nconst reducer = (state = initialState, action) => {\n   \n    switch (action.type) {\n\n        case actionTypes.INIT_STATE: return initState();\n        \n        case actionTypes.GET_DATA_LOADING: return getDataLoading(state, action);\n        case actionTypes.GET_DATA_SUCCESS: return getDataSuccess(state, action);\n        case actionTypes.GET_DATA_ERROR: return getDataError(state, action);\n\n        default: return state;\n    }\n};\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}