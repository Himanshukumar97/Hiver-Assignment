{"ast":null,"code":"import _objectSpread from\"/Users/himanshukumar/Documents/hiver-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as actionTypes from'./actionTypes';import _ from'lodash';var initialState={getDataState:'INIT',data:[],error:'',lastPage:false,hitsPerQuery:0,hitsPerPage:0,queryHitted:null};var initState=function initState(){return initialState;};var getDataLoading=function getDataLoading(state){return _objectSpread(_objectSpread({},state),{},{getDataState:'LOADING'});};var getDataSuccess=function getDataSuccess(state,action){var allData=_.cloneDeep(state.data);var filteredData;var allDataObjId=[];_.forEach(allData,function(eachData){allDataObjId.push(eachData.objectID);});filteredData=action.data.hits.filter(function(obj){return!_.includes(allDataObjId,obj.objectID)?true:false;});allData=_.concat(allData,filteredData);allData.forEach(function(eachData,index){if(!eachData['relevancy_score']){allData[index]['relevancy_score']=Number.MIN_SAFE_INTEGER;}});allData.sort(function(a,b){if(a.relevancy_score<b.relevancy_score)return 1;else return-1;});var lastPage=false;if(action.data.hits.length<action.data.hitsPerPage){lastPage=true;}return _objectSpread(_objectSpread({},state),{},{getDataState:'SUCCESS',data:allData,queryHitted:action.query,lastPage:lastPage,hitsPerQuery:action.data.hits.length,hitsPerPage:action.data.hitsPerPage,error:null});};var getDataError=function getDataError(state,action){return _objectSpread(_objectSpread({},state),{},{getDataState:'ERROR',error:action.error});};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case actionTypes.INIT_STATE:return initState();case actionTypes.GET_DATA_LOADING:return getDataLoading(state,action);case actionTypes.GET_DATA_SUCCESS:return getDataSuccess(state,action);case actionTypes.GET_DATA_ERROR:return getDataError(state,action);default:return state;}};export default reducer;","map":{"version":3,"sources":["/Users/himanshukumar/Documents/hiver-assignment/src/pages/Home/Store/reducer.js"],"names":["actionTypes","_","initialState","getDataState","data","error","lastPage","hitsPerQuery","hitsPerPage","queryHitted","initState","getDataLoading","state","getDataSuccess","action","allData","cloneDeep","filteredData","allDataObjId","forEach","eachData","push","objectID","hits","filter","obj","includes","concat","index","Number","MIN_SAFE_INTEGER","sort","a","b","relevancy_score","length","query","getDataError","reducer","type","INIT_STATE","GET_DATA_LOADING","GET_DATA_SUCCESS","GET_DATA_ERROR"],"mappings":"qKAAA,MAAO,GAAKA,CAAAA,WAAZ,KAA6B,eAA7B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,YAAY,CAAE,MADG,CAEjBC,IAAI,CAAC,EAFY,CAGjBC,KAAK,CAAC,EAHW,CAIjBC,QAAQ,CAAC,KAJQ,CAKjBC,YAAY,CAAC,CALI,CAMjBC,WAAW,CAAC,CANK,CAOjBC,WAAW,CAAC,IAPK,CAArB,CAUA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,MAAOR,CAAAA,YAAP,CACH,CAFD,CAMA,GAAMS,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAW,CAC9B,sCAAWA,KAAX,MACIT,YAAY,CAAE,SADlB,GAGH,CAJD,CAMA,GAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACD,KAAD,CAAQE,MAAR,CAAmB,CACtC,GAAIC,CAAAA,OAAO,CAAGd,CAAC,CAACe,SAAF,CAAYJ,KAAK,CAACR,IAAlB,CAAd,CACA,GAAIa,CAAAA,YAAJ,CACA,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACAjB,CAAC,CAACkB,OAAF,CAAUJ,OAAV,CAAmB,SAAAK,QAAQ,CAAG,CAC1BF,YAAY,CAACG,IAAb,CAAkBD,QAAQ,CAACE,QAA3B,EACH,CAFD,EAGAL,YAAY,CAAGH,MAAM,CAACV,IAAP,CAAYmB,IAAZ,CAAiBC,MAAjB,CAAwB,SAAAC,GAAG,QACtC,CAACxB,CAAC,CAACyB,QAAF,CAAWR,YAAX,CAAyBO,GAAG,CAACH,QAA7B,CAAD,CACE,IADF,CACS,KAF6B,EAA3B,CAAf,CAMAP,OAAO,CAAGd,CAAC,CAAC0B,MAAF,CAASZ,OAAT,CAAiBE,YAAjB,CAAV,CAEAF,OAAO,CAACI,OAAR,CAAgB,SAACC,QAAD,CAAUQ,KAAV,CAAkB,CAC9B,GAAG,CAACR,QAAQ,CAAC,iBAAD,CAAZ,CACA,CACIL,OAAO,CAACa,KAAD,CAAP,CAAe,iBAAf,EAAoCC,MAAM,CAACC,gBAA3C,CACH,CAEJ,CAND,EAOAf,OAAO,CAACgB,IAAR,CAAa,SAASC,CAAT,CAAYC,CAAZ,CAAe,CACxB,GAAID,CAAC,CAACE,eAAF,CAAoBD,CAAC,CAACC,eAA1B,CAA2C,MAAO,EAAP,CAA3C,IACK,OAAO,CAAC,CAAR,CACN,CAHH,EAKA,GAAI5B,CAAAA,QAAQ,CAAG,KAAf,CACA,GAAGQ,MAAM,CAACV,IAAP,CAAYmB,IAAZ,CAAiBY,MAAjB,CAA2BrB,MAAM,CAACV,IAAP,CAAYI,WAA1C,CACA,CACIF,QAAQ,CAAG,IAAX,CACH,CACD,sCAAWM,KAAX,MACIT,YAAY,CAAE,SADlB,CAEIC,IAAI,CAAEW,OAFV,CAGIN,WAAW,CAACK,MAAM,CAACsB,KAHvB,CAII9B,QAAQ,CAAEA,QAJd,CAKIC,YAAY,CAACO,MAAM,CAACV,IAAP,CAAYmB,IAAZ,CAAiBY,MALlC,CAMI3B,WAAW,CAACM,MAAM,CAACV,IAAP,CAAYI,WAN5B,CAOIH,KAAK,CAAE,IAPX,GAWH,CA3CD,CA6CA,GAAMgC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACzB,KAAD,CAAQE,MAAR,CAAmB,CACpC,sCAAWF,KAAX,MACIT,YAAY,CAAE,OADlB,CAEIE,KAAK,CAAES,MAAM,CAACT,KAFlB,GAIH,CALD,CAQA,GAAMiC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAkC,IAAjC1B,CAAAA,KAAiC,2DAAzBV,YAAyB,IAAXY,CAAAA,MAAW,2CAE9C,OAAQA,MAAM,CAACyB,IAAf,EAEI,IAAKvC,CAAAA,WAAW,CAACwC,UAAjB,CAA6B,MAAO9B,CAAAA,SAAS,EAAhB,CAE7B,IAAKV,CAAAA,WAAW,CAACyC,gBAAjB,CAAmC,MAAO9B,CAAAA,cAAc,CAACC,KAAD,CAAQE,MAAR,CAArB,CACnC,IAAKd,CAAAA,WAAW,CAAC0C,gBAAjB,CAAmC,MAAO7B,CAAAA,cAAc,CAACD,KAAD,CAAQE,MAAR,CAArB,CACnC,IAAKd,CAAAA,WAAW,CAAC2C,cAAjB,CAAiC,MAAON,CAAAA,YAAY,CAACzB,KAAD,CAAQE,MAAR,CAAnB,CAEjC,QAAS,MAAOF,CAAAA,KAAP,CARb,CAUH,CAZD,CAcA,cAAe0B,CAAAA,OAAf","sourcesContent":["import * as actionTypes from './actionTypes';\nimport _ from 'lodash';\nconst initialState = {\n    getDataState: 'INIT',\n    data:[],\n    error:'',\n    lastPage:false,\n    hitsPerQuery:0,\n    hitsPerPage:0,\n    queryHitted:null\n}\n\nconst initState = () => {\n    return initialState;\n}\n\n\n\nconst getDataLoading = (state) => {\n    return {...state, \n        getDataState: 'LOADING'\n    } ;\n}\n\nconst getDataSuccess = (state, action) => {\n    let allData = _.cloneDeep(state.data);\n    let filteredData ; \n    let allDataObjId = [] ;\n    _.forEach(allData, eachData =>{\n        allDataObjId.push(eachData.objectID);\n    });\n    filteredData = action.data.hits.filter(obj =>\n        !_.includes(allDataObjId, obj.objectID) ?\n          true : false\n      )\n\n    \n    allData = _.concat(allData,filteredData) ; \n    \n    allData.forEach((eachData,index)=>{\n        if(!eachData['relevancy_score'])\n        {\n            allData[index]['relevancy_score'] = Number.MIN_SAFE_INTEGER; \n        }\n            \n    })\n    allData.sort(function(a, b) {\n        if (a.relevancy_score < b.relevancy_score) return 1;\n        else return -1 ;\n      });\n\n    let lastPage = false ; \n    if(action.data.hits.length <  action.data.hitsPerPage)\n    {\n        lastPage = true ; \n    }\n    return {...state,\n        getDataState: 'SUCCESS',\n        data: allData,\n        queryHitted:action.query,\n        lastPage: lastPage,\n        hitsPerQuery:action.data.hits.length,\n        hitsPerPage:action.data.hitsPerPage,\n        error: null\n    }\n    \n    \n};\n\nconst getDataError = (state, action) => {\n    return {...state,\n        getDataState: 'ERROR',\n        error: action.error,\n    };\n};\n\n\nconst reducer = (state = initialState, action) => {\n   \n    switch (action.type) {\n\n        case actionTypes.INIT_STATE: return initState();\n        \n        case actionTypes.GET_DATA_LOADING: return getDataLoading(state, action);\n        case actionTypes.GET_DATA_SUCCESS: return getDataSuccess(state, action);\n        case actionTypes.GET_DATA_ERROR: return getDataError(state, action);\n       \n        default: return state;\n    }\n};\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}