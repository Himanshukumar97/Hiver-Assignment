{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport _ from 'lodash';\nconst initialState = {\n  getDataState: 'INIT',\n  data: [],\n  error: '',\n  lastPage: false,\n  hits\n};\n\nconst initState = () => {\n  return initialState;\n}; //GET DATA REDUCERS\n\n\nconst getLastPage = state => {\n  return { ...state,\n    lastPage: 'TRUE'\n  };\n};\n\nconst getDataLoading = state => {\n  return { ...state,\n    getDataState: 'LOADING'\n  };\n};\n\nconst getDataSuccess = (state, action) => {\n  let allData = _.cloneDeep(state.data);\n\n  let filteredData;\n  let allDataObjId = [];\n\n  _.forEach(allData, eachData => {\n    allDataObjId.push(eachData.objectID);\n  });\n\n  filteredData = action.data.hits.filter(obj => !_.includes(allDataObjId, obj.objectID) ? true : false);\n  allData = _.concat(allData, filteredData);\n  allData.forEach((eachData, index) => {\n    if (!eachData['relevancy_score']) {\n      allData[index]['relevancy_score'] = Number.MIN_SAFE_INTEGER;\n    }\n  });\n  allData.sort(function (a, b) {\n    if (a.relevancy_score < b.relevancy_score) return 1;else return -1;\n  });\n  let lastPage = false;\n\n  if (action.data.hits.length < action.data.hitsPerPage) {\n    lastPage = true;\n  }\n\n  return { ...state,\n    getDataState: 'SUCCESS',\n    data: allData,\n    lastPage: lastPage,\n    error: null\n  };\n};\n\nconst getDataError = (state, action) => {\n  return { ...state,\n    getDataState: 'ERROR',\n    error: action.error\n  };\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.INIT_STATE:\n      return initState();\n\n    case actionTypes.GET_DATA_LOADING:\n      return getDataLoading(state, action);\n\n    case actionTypes.GET_DATA_SUCCESS:\n      return getDataSuccess(state, action);\n\n    case actionTypes.GET_DATA_ERROR:\n      return getDataError(state, action);\n\n    case actionTypes.GET_DATA_SUCCESS_LASTPAGE:\n      return getLastPage(state, action);\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/himanshukumar/Documents/hiver-assignment/src/pages/Home/Store/reducer.js"],"names":["actionTypes","_","initialState","getDataState","data","error","lastPage","hits","initState","getLastPage","state","getDataLoading","getDataSuccess","action","allData","cloneDeep","filteredData","allDataObjId","forEach","eachData","push","objectID","filter","obj","includes","concat","index","Number","MIN_SAFE_INTEGER","sort","a","b","relevancy_score","length","hitsPerPage","getDataError","reducer","type","INIT_STATE","GET_DATA_LOADING","GET_DATA_SUCCESS","GET_DATA_ERROR","GET_DATA_SUCCESS_LASTPAGE"],"mappings":"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","sourcesContent":["import * as actionTypes from './actionTypes';\nimport _ from 'lodash';\nconst initialState = {\n    getDataState: 'INIT',\n    data:[],\n    error:'',\n    lastPage:false,\n    hits\n}\n\nconst initState = () => {\n    return initialState;\n}\n\n//GET DATA REDUCERS\nconst getLastPage = (state) => {\n    return {...state, \n        lastPage: 'TRUE'\n    } ;\n}\n\nconst getDataLoading = (state) => {\n    return {...state, \n        getDataState: 'LOADING'\n    } ;\n}\n\nconst getDataSuccess = (state, action) => {\n    let allData = _.cloneDeep(state.data);\n    let filteredData ; \n    let allDataObjId = [] ;\n    _.forEach(allData, eachData =>{\n        allDataObjId.push(eachData.objectID);\n    });\n    filteredData = action.data.hits.filter(obj =>\n        !_.includes(allDataObjId, obj.objectID) ?\n          true : false\n      )\n\n    \n    allData = _.concat(allData,filteredData) ; \n    \n    allData.forEach((eachData,index)=>{\n        if(!eachData['relevancy_score'])\n        {\n            allData[index]['relevancy_score'] = Number.MIN_SAFE_INTEGER; \n        }\n            \n    })\n    allData.sort(function(a, b) {\n        if (a.relevancy_score < b.relevancy_score) return 1;\n        else return -1 ;\n      });\n\n    let lastPage = false ; \n    if(action.data.hits.length <  action.data.hitsPerPage)\n    {\n        lastPage = true ; \n    }\n    return {...state,\n        getDataState: 'SUCCESS',\n        data: allData,\n        lastPage: lastPage,\n        error: null\n    }\n    \n    \n};\n\nconst getDataError = (state, action) => {\n    return {...state,\n        getDataState: 'ERROR',\n        error: action.error,\n    };\n};\n\n\nconst reducer = (state = initialState, action) => {\n   \n    switch (action.type) {\n\n        case actionTypes.INIT_STATE: return initState();\n        \n        case actionTypes.GET_DATA_LOADING: return getDataLoading(state, action);\n        case actionTypes.GET_DATA_SUCCESS: return getDataSuccess(state, action);\n        case actionTypes.GET_DATA_ERROR: return getDataError(state, action);\n        case actionTypes.GET_DATA_SUCCESS_LASTPAGE: return getLastPage(state, action);\n\n        default: return state;\n    }\n};\n\nexport default reducer;"]},"metadata":{},"sourceType":"module"}