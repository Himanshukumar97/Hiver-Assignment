(this["webpackJsonphiver-assignment"]=this["webpackJsonphiver-assignment"]||[]).push([[0],{48:function(t,e,a){},54:function(t,e,a){},74:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),n=a(14),i=a.n(n),c=(a(48),a(38)),u=a(8),o=a(33),l=a(34),h=a(12),g=a(43),d=a(42),p=a(15),j=(a(54),"INIT_STATE_STATE"),f="GET_DATA_LOADING",m="GET_DATA_SUCCESS",A="GET_DATA_ERROR",y=a(36),b=a.n(y),O=a(37),v=a.n(O),x=a(3),P=a.n(x),T=a(1),E=function(t){Object(g.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).intersectFunc=function(t,e){return e.filter((function(e){if(t.includes(e))return!0})).filter((function(t,e,a){return a.indexOf(t)===e}))},s.searchFilter=function(t){var e=[];P.a.isEmpty(t)&&(t=s.state.query),console.log("query search filter",t);var a=Object(h.a)(s),r=P.a.cloneDeep(s.props.data);return(e=P.a.isEmpty(t)?[]:r.filter((function(e){var s=["title","url","author","story_text","story_title"],r=a.intersectFunc,n=(t=t.toLowerCase()).split(" ");for(var i in e){if(e.hasOwnProperty(i)&&P.a.includes(s,i)&&!P.a.isEmpty(e[i]))if(r(e[i].toLowerCase(),n).length===n.length)return!0}}))).length>10&&(e=e.slice(0,10)),s.setState({result:e}),e},s.callAPI=function(t,e,a){!0===a&&s.setState({page:e}),s.props.getData(t,e)},s.debounceFunction=function(t,e,a,r,n){var i=Object(h.a)(s);return function(){var s=this;clearTimeout(i.debounceTimer),i.debounceTimer=setTimeout((function(){return a.call(s,t,e,n)}),r)}},s.handleOnInputChange=function(t){var e=t.target.value,a=s.state.page;s.searchFilter(e).length<10&&s.debounceFunction(e,a,s.callAPI,1e3)();console.log("query input change",e),s.setState({query:e,page:1})},s.convertMS=function(t){var e,a,s,r,n,i,c,u="";return r=Math.floor(t/1e3),s=Math.floor(r/60),r%=60,a=Math.floor(s/60),s%=60,e=Math.floor(a/24),n=Math.floor(e/7),a%=24,e%=7,i=Math.floor(e/30),(c=Math.floor(e/365))>0?(u+=c+" year",c>1&&(u+="s"),u+=" ago"):i>0?(u+=i+" month",i>1&&(u+="s"),u+=" ago"):n>0?(u+=n+" week",n>1&&(u+="s"),u+=" ago"):e>0?(u+=e+" day",e>1&&(u+="s"),u+=" ago"):a>0?(u+=a+" hour",a>1&&(u+="s"),u+=" ago"):s>0?(u+=s+" minute",s>1&&(u+="s"),u+=" ago"):r>0&&(u+=r+" seconds",r>1&&(u+="s"),u+=" ago"),u},s.postMessage=function(t){var e=t-(new Date).getMilliseconds();return s.convertMS(e)},s.getText=function(t,e){return e?s.getTextWithHighlights(t,e):t},s.getTextWithHighlights=function(t,e){return(e=e.split(" ")).forEach((function(e){var a=new RegExp(e,"gi");t=t.replaceAll(a,'<mark class="highlight">$&</mark>')})),Object(T.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})},s.state={query:"",result:[],page:1},s.debounceTimer=null,s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t,e){if(t.data===this.props.data||this.props.hitsPerQuery!==this.props.hitsPerPage&&!0!==this.props.lastPage){if(!P.a.isEmpty(this.state.query)&&!P.a.isEmpty(this.props.queryHitted)&&this.props.queryHitted===this.state.query&&this.props.data.length>0&&this.props.hitsPerQuery===this.props.hitsPerPage&&this.props.hitsPerPage>0&&this.state.result.length<10&&!1===this.props.lastPage){console.log("prevState.query ",e.query,this.state.query),console.log("true ",this.state.page,this.props.hitsPerQuery,this.state.result.length);var a=this.state.page+1;this.debounceFunction(this.state.query,a,this.callAPI,1e3,!0)()}}else this.searchFilter()}},{key:"render",value:function(){var t=this,e=[],a=P.a.cloneDeep(this.state.result),s=this;return a.length>0&&a.forEach((function(t,a){e.push(Object(T.jsxs)("div",{className:"padding",children:[t.url||t.title?Object(T.jsxs)("div",{className:"subList",children:[Object(T.jsxs)("span",{className:"spanWithBlack",id:"spanDemo",children:[t.title?s.getText(t.title,s.state.query):null," "]},a),Object(T.jsxs)("span",{className:"storyUrl",children:[t.url?"(":null," ",t.url?s.getText(t.url,s.state.query):null," ",t.url?")":null," "]})]}):null,t.author||t.num_comments?Object(T.jsxs)("div",{className:"subList",children:[t.author?Object(T.jsxs)("span",{children:["Author: ",s.getText(t.author,s.state.query)]}):null,t.num_comments?Object(T.jsxs)("span",{children:[t.author?Object(T.jsx)(r.a.Fragment,{children:" | "}):null,"comments: ",t.num_comments]}):null,t.created_at_i?Object(T.jsxs)("span",{children:[t.author||t.num_comments?Object(T.jsx)(r.a.Fragment,{children:" | "}):null,s.postMessage(t.created_at_i)]}):null]}):null,t.story_text?Object(T.jsx)("div",{className:"subList spanWithBlack",children:s.getText(t.story_text,s.state.query)}):null,Object(T.jsx)("hr",{className:"horizontalLine"})]},a))})),Object(T.jsxs)("div",{className:"maindiv",children:[Object(T.jsx)("h2",{children:"Search Hacker News"}),Object(T.jsx)("div",{className:"dropDown",children:Object(T.jsxs)("div",{className:v()(""),children:[Object(T.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAC+0lEQVRoge2Zz08TQRTHP/UH3tSLhQjEIN7k5kEhil7VgyYWww8T/wQTf0Rignqj/gOevZiQhoO0xsSb4K8Yr+qdkxG8KBEstNbDvHFWWaSzM7Ot0k+yeZu2833vdffNzL6FFi2CkHEc3wGcAU4CfcABYLd89wWYB94Dz4AnwCdHf94ZBErAGlCr81gDisCJBsS7jl7UP6uDqwCzwFXgKJAFdsqRBY4B14A5+a0e9xg4mHLsvxgDliSQb8AksM9ifBbIA8ui8RUY8RzjptzG/JtTQKeDVhdQiOhNOEdXJ3fF4Q85d50gNFeAKiklMyaOqkAugP4QJpnhAPqAKmxdEzdDOQHGMTXTE8KBnp2mQohHyGBqpuRbfFCEl4Fu3+IxdKJmwhpw3KdwSUQnfYpuQl58zvgS7ECtwhXs1glXsuJzVc6t2Bbz2VlgB/ACWHQKzY4F4DVqV3DadnBcIoNiiw5BJUXfVqdsB8Yl0if2ZdJoHHgl9rAPsc+ookuzPjTt4nvBh1hZxNp8iFmyS3x/tx0Yd2s1A6u2A+ISWRK7xy2WROwVa31rxSUyL7Y3cTjJOST2o+3AuETeiR1IHE5y+sV+sB0Yl8is2POJw0mO9vnUh1g7ZotivVVwQG9R1jC14kwRNQ3mfQnWwT3xWfAp2i+iK6S/jT/iW1xv5Qv4e06PIwNMi69HIRz0oB4/a6jH0VDcEh+LwP5QTkYwzYehAPoXMc2HcwH0f2MCk8w4fm6zDOpK6CSqqI5NcHQyuma6HLS6MTURPSrAqFuY9TGMqZll1NRss85kUVPsCqb9E+0H62RSaaP2YGYz7XgOuI7a0rSjtv9tcj4A3ACe/xH0FKqwRxuZDKiWzQx2rxXKwENUhz7KRskE6zzGkQUuAw+At6gptIxa3OaBN8B9CepvT5wjNEEyvhhi/RWuAJcaGVRSNkomlanZN/9VMjm2QDKpLJq+yaE6KlsnmWbta0WZRtVGJfLZdkzH5Z/jAubK3GlwLM7kSPF1dosWwE/57P8k2tc9zAAAAABJRU5ErkJggg==",alt:"searchIcon",className:"searchIcon"}),Object(T.jsx)("input",{className:"searchBox",id:"mySearchInput",placeholder:"Type here to start searching",onKeyUp:function(e){return t.handleOnInputChange(e)},autoComplete:"off"}),"LOADING"===this.props.getDataState?Object(T.jsx)("div",{className:"loader"}):P.a.isEmpty(this.state.query)||a.length>0?Object(T.jsx)("div",{className:"itemResults",children:e}):Object(T.jsx)("div",{className:"itemResults",children:' "NO DATA FOUND WITH THE SEARCH" '})]})})]})}}]),a}(s.Component),S=Object(p.b)((function(t){return{data:t.data,lastPage:t.lastPage,getDataState:t.getDataState,hitsPerQuery:t.hitsPerQuery,hitsPerPage:t.hitsPerPage,queryHitted:t.queryHitted}}),(function(t){return{getData:function(e,a){return t(function(t,e){return function(a,s){a({type:f});var r="http://hn.algolia.com/api/v1/search?query="+t+"&page="+e;b.a.get(r).then((function(e){200!==e.status&&201!==e.status||a({type:m,data:e.data,query:t})})).catch((function(t){a({type:A,error:t})}))}}(e,a))}}}))(E);a(74);var N=function(){return Object(T.jsx)("div",{className:"app",children:Object(T.jsx)(c.a,{children:Object(T.jsx)(u.c,{children:Object(T.jsx)(u.a,{path:"/",exact:!0,children:Object(T.jsx)(S,{})})})})})},D=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(e){var a=e.getCLS,s=e.getFID,r=e.getFCP,n=e.getLCP,i=e.getTTFB;a(t),s(t),r(t),n(t),i(t)}))},w=a(13),q=a(10),I={getDataState:"INIT",data:[],error:"",lastPage:!1,hitsPerQuery:0,hitsPerPage:0,queryHitted:null},R=function(){return I},H=function(t){return Object(q.a)(Object(q.a)({},t),{},{getDataState:"LOADING"})},Q=function(t,e){var a,s=P.a.cloneDeep(t.data),r=[];P.a.forEach(s,(function(t){r.push(t.objectID)})),a=e.data.hits.filter((function(t){return!P.a.includes(r,t.objectID)})),(s=P.a.concat(s,a)).forEach((function(t,e){t.relevancy_score||(s[e].relevancy_score=Number.MIN_SAFE_INTEGER)})),s.sort((function(t,e){return t.relevancy_score<e.relevancy_score?1:-1}));var n=!1;return e.data.hits.length<e.data.hitsPerPage&&(n=!0),Object(q.a)(Object(q.a)({},t),{},{getDataState:"SUCCESS",data:s,queryHitted:e.query,lastPage:n,hitsPerQuery:e.data.hits.length,hitsPerPage:e.data.hitsPerPage,error:null})},k=function(t,e){return Object(q.a)(Object(q.a)({},t),{},{getDataState:"ERROR",error:e.error})},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return R();case f:return H(t);case m:return Q(t,e);case A:return k(t,e);default:return t}},F=a(41),B=Object(w.c)(C,Object(w.a)(F.a));i.a.render(Object(T.jsx)(p.a,{store:B,children:Object(T.jsx)(N,{})}),document.getElementById("root")),D()}},[[79,1,2]]]);
//# sourceMappingURL=main.d298cc33.chunk.js.map